# ç¬¬å››ç« ï¼šæ•™ Friday æ€è€ƒ

**æ ¸å¿ƒä¸»é¢˜**ï¼šReAct èŒƒå¼ â€”â€” ä»ç›´æ¥è¡ŒåŠ¨åˆ°æ¨ç†å¾ªç¯

---

## ğŸ“– Day 4: ç‹©çŒè¡ŒåŠ¨å¤±è´¥

**ä»»åŠ¡ç›®æ ‡**ï¼šæ•è·ä¸›æ—æ·±å¤„çš„"é“çš®é‡çŒª"

**æ‰§è¡Œæ–¹æ¡ˆ**ï¼š
```bash
Input: "Fridayï¼Œå»æŠŠé‚£å¤´çŒªæ€äº†å¸¦å›æ¥"
Expected: å‘¨å¯†è§„åˆ’ + æˆåŠŸç‹©çŒ
Actual: ç›´æ¥å†²é”‹ â†’ å·®ç‚¹ä¸§å‘½
```

**è¡ŒåŠ¨è®°å½•**ï¼š

| æ—¶é—´ | é¢„æœŸè¡Œä¸º | å®é™…è¡Œä¸º | ç»“æœ |
|------|---------|---------|------|
| 10:00 | è§‚å¯Ÿç¯å¢ƒ | ç›´æ¥å†²é”‹ | âœ— æœªè§‚å¯Ÿ |
| 10:01 | åˆ¶å®šè®¡åˆ’ | ç›´çº¿å†²é”‹ | âœ— æ— è®¡åˆ’ |
| 10:02 | ä½¿ç”¨æ­¦å™¨ | èµ¤æ‰‹ç©ºæ‹³ | âœ— æœªç”¨å·¥å…· |

**å¤±è´¥åˆ†æ**ï¼š
```python
# Friday çš„æ‰§è¡Œæµç¨‹
Input("æ€çŒª") â†’ [ç›´æ¥è¡ŒåŠ¨] â†’ å†²å‘é‡çŒª â†’ å·®ç‚¹è¢«æ’æ­»

# æ­£ç¡®çš„æ‰§è¡Œæµç¨‹åº”è¯¥æ˜¯
Input("æ€çŒª") â†’ [è§‚å¯Ÿ] â†’ [æ€è€ƒ] â†’ [è¡ŒåŠ¨] â†’ å®‰å…¨ç‹©çŒ
```

**å…³é”®å‘ç°**ï¼š
> Friday ç¼ºå°‘ä¸­é—´æ­¥éª¤ â€”â€” æ€è€ƒï¼ˆReasoningï¼‰
> ä»"æ¥æ”¶æŒ‡ä»¤"åˆ°"æ‰§è¡Œè¡ŒåŠ¨"ä¹‹é—´ç¼ºå°‘æ¨ç†ç¯èŠ‚

---

## ğŸ› ï¸ æŠ€æœ¯è§£æ

### é—®é¢˜è¯Šæ–­

**Direct IO æ¨¡å¼ï¼ˆå½“å‰ï¼‰**ï¼š
```
User Input â†’ LLM â†’ Action
```

**é—®é¢˜**ï¼š
- æ— ç¯å¢ƒæ„ŸçŸ¥
- æ— é£é™©è¯„ä¼°
- æ— è®¡åˆ’åˆ¶å®š
- ç›´æ¥è¡ŒåŠ¨ = é€æ­»

### ReAct èŒƒå¼ï¼ˆè§£å†³æ–¹æ¡ˆï¼‰

**ReAct = Reasoning + Acting**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ReAct å¾ªç¯                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Observe  â”‚ â†’ â”‚  Think   â”‚ â†’ â”‚  Act     â”‚ â”‚
â”‚  â”‚ (è§‚å¯Ÿ)   â”‚    â”‚  (æ€è€ƒ)  â”‚    â”‚  (è¡ŒåŠ¨)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â†‘                                 â†“       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Result â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    (åé¦ˆ)                     â”‚
â”‚                                                  â”‚
â”‚  å¾ªç¯ç›´åˆ°ä»»åŠ¡å®Œæˆ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¾ªç¯è¯¦è§£

#### 1. Observationï¼ˆè§‚å¯Ÿï¼‰
```python
def observe(agent):
    return {
        "target": "é“çš®é‡çŒª",
        "distance": "50ç±³",
        "terrain": "ä¸›æ—ï¼Œæœ‰é®æŒ¡",
        "my_equipment": "æœ¨çŸ›",
        "threat_level": "HIGH"
    }
```

#### 2. Thoughtï¼ˆæ€è€ƒï¼‰
```python
def think(observation):
    # LLM ç”Ÿæˆæ¨ç†è¿‡ç¨‹
    return """
    ç›®æ ‡æ˜¯é‡çŒªï¼Œå…·æœ‰æ”»å‡»æ€§ï¼Œç›´æ¥æ¥è¿‘å¤ªå±é™©ã€‚
    æˆ‘æœ‰æœ¨çŸ›ï¼Œå‰æ–¹æœ‰çŒæœ¨ä¸›å¯ä»¥éšè”½ã€‚
    åº”è¯¥å…ˆæ½œä¼ï¼Œå†çªè¢­ã€‚
    """
```

#### 3. Actionï¼ˆè¡ŒåŠ¨ï¼‰
```python
def act(thought):
    return {
        "tool": "move",
        "target": "çŒæœ¨ä¸›",
        "mode": "stealth"
    }
```

#### 4. Resultï¼ˆç»“æœåé¦ˆï¼‰
```python
observation = observe()  # è§‚å¯Ÿæ–°çŠ¶æ€
# å¾ªç¯ç»§ç»­...
```

---

## ğŸ’» å®ç°æ–¹æ¡ˆ

### ReAct Agent ä»£ç æ¡†æ¶

```python
class ReActAgent:
    def __init__(self, llm, tools):
        self.llm = llm
        self.tools = tools  # ['æœ¨çŸ›', 'é™·é˜±', 'ç«ç§']

    def solve(self, task):
        history = []
        max_iterations = 10

        for i in range(max_iterations):
            # 1. è§‚å¯Ÿ
            observation = self.observe()

            # 2. æ€è€ƒï¼ˆå…³é”®æ­¥éª¤ï¼‰
            thought = self.think(
                task=task,
                observation=observation,
                history=history
            )

            # 3. è¡ŒåŠ¨
            action = self.parse_action(thought)
            result = self.execute(action)

            # 4. è®°å½•
            history.append({
                "observation": observation,
                "thought": thought,
                "action": action,
                "result": result
            })

            # 5. åˆ¤æ–­æ˜¯å¦å®Œæˆ
            if self.is_complete(result):
                return result

    def think(self, task, observation, history):
        prompt = f"""
ä»»åŠ¡ï¼š{task}
å½“å‰è§‚å¯Ÿï¼š{observation}
å†å²è®°å½•ï¼š{history}

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼æ€è€ƒï¼š
Thought: [ä½ çš„æ¨ç†è¿‡ç¨‹]
Action: [è¦æ‰§è¡Œçš„è¡ŒåŠ¨]

ç¤ºä¾‹ï¼š
Thought: ç›®æ ‡å±é™©ï¼Œéœ€è¦éšè”½
Action: Move_to("çŒæœ¨ä¸›")
"""
        return self.llm.generate(prompt)

    def parse_action(self, response):
        # è§£æ "Action: Move_to(...)"
        if "Action:" in response:
            return extract_action(response)
```

### æ‰§è¡Œæµç¨‹å¯¹æ¯”

**ä¿®æ”¹å‰ï¼ˆDirect IOï¼‰**ï¼š
```python
def direct_friday(task):
    return llm.generate(task)
    # è¾“å‡ºï¼š"æ”¶åˆ°ï¼æ‰§è¡Œç‹©çŒä»»åŠ¡ï¼"
    # ç„¶åç›´æ¥å†²é”‹ â†’ é€å‘½
```

**ä¿®æ”¹åï¼ˆReActï¼‰**ï¼š
```python
def react_friday(task):
    while not done:
        obs = observe()
        thought = llm.think(obs)  # å…ˆæ€è€ƒ
        action = parse(thought)    # å†è¡ŒåŠ¨
        result = execute(action)
        if result == "success":
            done = True
```

### å®æˆ˜éªŒè¯

```bash
$ ./friday --mode react --task "ç‹©çŒé‡çŒª"

[Loop 1]
Observation: é‡çŒªåœ¨50ç±³å¤–ï¼Œåƒè‰ï¼ŒèƒŒå¯¹ç€æˆ‘
Thought: ç›®æ ‡å±é™©ï¼Œç›´æ¥æ¥è¿‘ä¼šè¢«å‘ç°ã€‚å‰æ–¹æœ‰çŒæœ¨ä¸›ã€‚
Action: Move_to("çŒæœ¨ä¸›", mode="stealth")

[Loop 2]
Observation: å·²åˆ°è¾¾çŒæœ¨ä¸›ï¼Œé‡çŒªè·ç¦»5ç±³ï¼Œä»åœ¨åƒè‰
Thought: ç°åœ¨æ˜¯æœ€ä½³æ—¶æœºã€‚ç”¨æœ¨çŸ›æŠ•æ·è…¿éƒ¨ï¼Œé™åˆ¶ç§»åŠ¨ã€‚
Action: Use_Tool("Throw_Spear", target="Boar_Leg")

[Loop 3]
Observation: é‡çŒªå—ä¼¤ï¼Œæ— æ³•å¿«é€Ÿç§»åŠ¨
Thought: ç›®æ ‡å·²å¤±å»å¨èƒï¼Œå¯ä»¥è¡¥åˆ€ã€‚
Action: Execute("finishing_move")

Result: SUCCESS
```

---

## æŠ€æœ¯å¯¹æ¯”

| ç»´åº¦ | Direct IO | ReAct |
|------|-----------|-------|
| è¡ŒåŠ¨å‰æ€è€ƒ | âœ— æ—  | âœ“ æœ‰ |
| é£é™©è¯„ä¼° | âœ— æ—  | âœ“ æœ‰ |
| è®¡åˆ’èƒ½åŠ› | âœ— æ—  | âœ“ æœ‰ |
| é”™è¯¯ç‡ | HIGH | LOW |
| é€‚ç”¨åœºæ™¯ | ç®€å•ä»»åŠ¡ | **å¤æ‚ä»»åŠ¡** |

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

**å½“å‰è¿›å±•**ï¼š
- âœ“ å¹»è§‰é—®é¢˜è§£å†³ï¼ˆç¬¬ä¸‰ç« ï¼‰
- âœ“ æ¨ç†å¾ªç¯å»ºç«‹ï¼ˆæœ¬ç« ï¼‰

**æ–°é—®é¢˜å‘ç°**ï¼š
- æ‰‹åŠ¨å†™ ReAct ä»£ç å¤ªç´¯
- æƒ³è¦æ›´å¿«çš„å¼€å‘æ–¹å¼

**ä¸‹ä¸€æ­¥ä»»åŠ¡**ï¼š
- [ ] ç¬¬äº”ç« ï¼šå¼•å…¥ä½ä»£ç å¹³å°ï¼ˆDify/Cozeï¼‰
- [ ] ç¬¬äº”ç« ï¼šå¯è§†åŒ–å·¥ä½œæµè®¾è®¡
- [ ] ç¬¬äº”ç« ï¼šå¿«é€Ÿæ„å»º Agent

---

## ç³»ç»Ÿæ›´æ–°

```bash
$ git log --oneline -1

a3f2c1b feat: implement ReAct loop

CHANGES:
- æ–°å¢ ReActAgent ç±»
- å®ç°è§‚å¯Ÿ-æ€è€ƒ-è¡ŒåŠ¨å¾ªç¯
- æ·»åŠ æ€ç»´é“¾è§£æ
- ä¿®å¤é²è½è¡ŒåŠ¨é—®é¢˜

VERSION: 0.3.0
STATUS: Friday ç°åœ¨ä¼šæ€è€ƒäº†ï¼Œä½†å·¥å…·å¤ªå°‘
```

---

**â†’ [ç¬¬äº”ç« ï¼šæ¡åˆ°çš„ä¸‡èƒ½å·¥å…·ç®±](./ç¬¬äº”ç« ï¼šæ¡åˆ°çš„ä¸‡èƒ½å·¥å…·ç®±.md)**
